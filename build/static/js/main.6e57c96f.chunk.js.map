{"version":3,"sources":["pages/Home.jsx","api/index.js","pages/FormErrors.jsx","pages/Registration.jsx","pages/Login.jsx","pages/Messenger.jsx","app/index.js","index.js"],"names":["Form","styled","div","attrs","className","Home","href","Component","api","axios","create","baseURL","apis","createUser","payload","post","getUsersByUsername","username","get","updateUserById","id","put","login","logout","getUserById","FormErrors","formErrors","Object","keys","map","fieldName","i","length","key","Registration","props","handleChangeInputEmail","event","a","email","target","value","setState","validateField","handleChangeInputUsername","handleChangeInputPassword","password","handleIncludeUser","state","then","res","window","alert","history","push","catch","error","emailValid","passwordValid","formValid","fieldValidationErrors","this","match","validateForm","errorClass","htmlFor","type","required","name","placeholder","onChange","onClick","Login","Messenger","App","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"2XAGA,IAAMA,EAAOC,IAAOC,IAAIC,MAAM,CAC1BC,UAAW,QADFH,CAAH,KAmBKI,E,iLAVP,OACI,kBAACL,EAAD,KACI,uIACA,uBAAGI,UAAU,kBAAkBE,KAAM,iBAArC,sEACA,uBAAGF,UAAU,kBAAkBE,KAAM,UAArC,2E,GANGC,a,+BCRbC,E,OAAMC,EAAMC,OAAO,CACrBC,QAAS,8BAmBEC,EATF,CACTC,WARsB,SAAAC,GAAO,OAAIN,EAAIO,KAAJ,gBAA0BD,IAS3DE,mBAR8B,SAAAC,GAAQ,OAAIT,EAAIU,IAAJ,iBAAkBD,KAS5DE,eAR0B,SAACC,EAAIN,GAAL,OAAiBN,EAAIa,IAAJ,kBAAmBD,GAAMN,IASpEQ,MARiB,SAAAR,GAAO,OAAIN,EAAIO,KAAJ,SAAmBD,IAS/CS,OARkB,kBAAMf,EAAIO,KAAJ,YASxBS,YARuB,SAAAJ,GAAE,OAAIZ,EAAIU,IAAJ,gBAAiBE,MCTrCK,EAAa,SAAC,GAAD,IAAEC,EAAF,EAAEA,WAAF,OACtB,yBAAKtB,UAAU,cACVuB,OAAOC,KAAKF,GAAYG,KAAI,SAACC,EAAWC,GACrC,OAAGL,EAAWI,GAAWE,OAAS,EAE1B,uBAAGC,IAAKF,GAAID,EAAZ,IAAwBJ,EAAWI,IAGhC,Q,oICLvB,IAAM9B,EAAOC,IAAOC,IAAIC,MAAM,CAC1BC,UAAW,QADFH,CAAH,KA6HKiC,E,YApHX,WAAYC,GAAQ,IAAD,8BACf,4CAAMA,KAaVC,uBAdmB,uCAcM,WAAMC,GAAN,eAAAC,EAAA,sDACfC,EAAQF,EAAMG,OAAOC,MACd,QACb,EAAKC,SAAS,CAAEH,UACZ,WAAQ,EAAKI,cAFJ,QAEwBJ,MAJhB,2CAdN,wDAqBnBK,0BArBmB,uCAqBS,WAAMP,GAAN,eAAAC,EAAA,sDAClBrB,EAAWoB,EAAMG,OAAOC,MAC9B,EAAKC,SAAS,CAAEzB,aAFQ,2CArBT,wDA0BnB4B,0BA1BmB,uCA0BS,WAAMR,GAAN,eAAAC,EAAA,sDAClBQ,EAAWT,EAAMG,OAAOC,MACjB,WACb,EAAKC,SAAS,CAAEI,aACZ,WAAQ,EAAKH,cAFJ,WAEwBG,MAJb,2CA1BT,wDAgEnBC,kBAhEmB,sBAgEC,oCAAAT,EAAA,+DACsB,EAAKU,MAAnCT,EADQ,EACRA,MAAOtB,EADC,EACDA,SAAU6B,EADT,EACSA,SACnBhC,EAAU,CAAEyB,QAAOtB,WAAU6B,YAFnB,SAIVtC,EAAIK,WAAWC,GAASmC,MAAK,SAAAC,GAC/BC,OAAOC,MAAP,4JACA,EAAKV,SAAS,CACVH,MAAO,GACPtB,SAAU,GACV6B,SAAU,KAEd,EAAKX,MAAMkB,QAAQC,KAAK,aACzBC,OAAM,SAAAC,GACDL,OAAOC,MAAP,iIAbQ,2CA7DhB,EAAKJ,MAAQ,CACTT,MAAO,GACPtB,SAAU,GACV6B,SAAU,GACVpB,WAAY,CAACa,MAAO,GAAIO,SAAU,IAClCW,YAAY,EACZC,eAAe,EACfC,WAAW,GAVA,E,2EAiCL7B,EAAWW,GACrB,IAAImB,EAAwBC,KAAKb,MAAMtB,WACnC+B,EAAaI,KAAKb,MAAMS,WACxBC,EAAgBG,KAAKb,MAAMU,cAE/B,OAAO5B,GACH,IAAK,QACD2B,EAAahB,EAAMqB,MAAM,wCACzBF,EAAsBrB,MAAQkB,EAAa,GAAK,cAChD,MACJ,IAAK,WACDC,EAAgBjB,EAAMT,QAAU,EAChC4B,EAAsBd,SAAWY,EAAgB,GAAI,gBAK7DG,KAAKnB,SAAS,CAAChB,WAAYkC,EACvBH,WAAYA,EACZC,cAAeA,GAChBG,KAAKE,gB,qCAIRF,KAAKnB,SAAS,CAACiB,UAAWE,KAAKb,MAAMS,YAAcI,KAAKb,MAAMU,kB,iCAGvDF,GACP,OAAwB,IAAjBA,EAAMxB,OAAe,GAAK,c,+BAqBjC,OACI,kBAAC,EAAD,KACI,kGACA,yBAAK5B,UAAU,uBACX,kBAAC,EAAD,CAAYsB,WAAYmC,KAAKb,MAAMtB,cAEvC,yBAAKtB,UAAS,qBAAgByD,KAAKG,WAAWH,KAAKb,MAAMtB,WAAWa,SAChE,2BAAO0B,QAAQ,SAAf,SACA,2BAAOC,KAAK,QAAQC,UAAQ,EAAC/D,UAAU,eAAegE,KAAK,QACpDC,YAAY,QACZ5B,MAAOoB,KAAKb,MAAMT,MAClB+B,SAAUT,KAAKzB,0BAE1B,6BACI,2BAAO6B,QAAQ,YAAf,+FACA,2BAAOC,KAAK,WAAWC,UAAQ,EAAC/D,UAAU,eAAegE,KAAK,WACvDC,YAAY,8FACZ5B,MAAOoB,KAAKb,MAAM/B,SAClBqD,SAAUT,KAAKjB,6BAE1B,yBAAKxC,UAAS,qBAAgByD,KAAKG,WAAWH,KAAKb,MAAMtB,WAAWoB,YAChE,2BAAOmB,QAAQ,YAAf,wCACA,2BAAOC,KAAK,WAAW9D,UAAU,eAAegE,KAAK,WAC9CC,YAAY,uCACZ5B,MAAOoB,KAAKb,MAAMF,SAClBwB,SAAUT,KAAKhB,6BAE1B,4BAAQqB,KAAK,SAAS9D,UAAU,kBAAkBmE,QAASV,KAAKd,mBAAhE,gHACA,uBAAG3C,UAAU,kBAAkBE,KAAM,KAArC,6C,GA/GWC,a,oICT3B,IAAMP,EAAOC,IAAOC,IAAIC,MAAM,CAC1BC,UAAW,QADFH,CAAH,KAuEKuE,E,YA9DX,WAAYrC,GAAQ,IAAD,8BACf,4CAAMA,KAQVC,uBATmB,uCASM,WAAMC,GAAN,eAAAC,EAAA,sDACfC,EAAQF,EAAMG,OAAOC,MAC3B,EAAKC,SAAS,CAAEH,UAFK,2CATN,wDAcnBM,0BAdmB,uCAcS,WAAMR,GAAN,eAAAC,EAAA,sDAClBQ,EAAWT,EAAMG,OAAOC,MAC9B,EAAKC,SAAS,CAAEI,aAFQ,2CAdT,wDAmBnBC,kBAnBmB,sBAmBC,kCAAAT,EAAA,+DACY,EAAKU,MAAzBT,EADQ,EACRA,MAAOO,EADC,EACDA,SACThC,EAAU,CAAEyB,QAAOO,YAFT,SAIVtC,EAAIc,MAAMR,GAASmC,MAAK,SAAAC,GAC1BC,OAAOC,MAAP,gJACA,EAAKV,SAAS,CACVH,MAAO,GACPO,SAAU,KAEd,EAAKX,MAAMkB,QAAQC,KAAK,WAEvBC,OAAM,SAAAC,GACHL,OAAOC,MAAP,gHAbQ,2CAhBhB,EAAKJ,MAAQ,CACTT,MAAO,GACPO,SAAU,IALC,E,sEAqCf,OACI,kBAAC,EAAD,KACI,kGACA,6BACI,2BAAOmB,QAAQ,SAAf,SACA,2BAAOC,KAAK,QAAQC,UAAQ,EAAC/D,UAAU,eAAegE,KAAK,QACpDC,YAAY,QACZ5B,MAAOoB,KAAKb,MAAMT,MAClB+B,SAAUT,KAAKzB,0BAE1B,6BACI,2BAAO6B,QAAQ,YAAf,wCACA,2BAAOC,KAAK,WAAW9D,UAAU,eAAegE,KAAK,WAC9CC,YAAY,uCACZ5B,MAAOoB,KAAKb,MAAMF,SAClBwB,SAAUT,KAAKhB,6BAE1B,6BACA,4BAAQqB,KAAK,SAAS9D,UAAU,kBAAkBmE,QAASV,KAAKd,mBAAhE,4BACA,uBAAG3C,UAAU,kBAAkBE,KAAM,KAArC,6C,GAzDIC,a,oICTpB,IAAMP,EAAOC,IAAOC,IAAIC,MAAM,CAC1BC,UAAW,QADFH,CAAH,KAiBKwE,E,iLARP,OACI,kBAAC,EAAD,KACI,0H,GAJQlE,a,MCUTmE,MAbf,WACI,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,UAAWxE,IACjC,kBAAC,IAAD,CAAOsE,KAAK,gBAAgBC,OAAK,EAACC,UAAW3C,IAC7C,kBAAC,IAAD,CAAOyC,KAAK,SAASC,OAAK,EAACC,UAAWL,IACtC,kBAAC,IAAD,CAAOG,KAAK,OAAOC,OAAK,EAACC,UAAWJ,OCVpDK,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.6e57c96f.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport styled from \"styled-components\";\r\n\r\nconst Form = styled.div.attrs({\r\n    className: 'Form',\r\n})`\r\n    width: 500px; \r\n    margin: auto;\r\n    margin-top:70px;\r\n`;\r\nclass Home extends Component {\r\n    render() {\r\n        return (\r\n            <Form>\r\n                <h1>Начальная страница</h1>\r\n                <a className=\"btn btn-primary\" href={'/registration'}>Регистрация</a>\r\n                <a className=\"btn btn-primary\" href={'/login'}>Авторизация</a>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home","import axios from 'axios'\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:3000/api',\r\n});\r\n\r\nexport const createUser = payload => api.post(`/registration`, payload);\r\nexport const getUsersByUsername = username => api.get(`/users/${username}`);\r\nexport const updateUserById = (id, payload) => api.put(`/update/${id}`, payload);\r\nexport const login = payload => api.post(`/login`, payload);\r\nexport const logout = () => api.post(`/logout`);\r\nexport const getUserById = id => api.get(`/user/${id}`);\r\n\r\nconst apis = {\r\n    createUser,\r\n    getUsersByUsername,\r\n    updateUserById,\r\n    login,\r\n    logout,\r\n    getUserById,\r\n};\r\n\r\nexport default apis","import React from 'react';\r\n\r\nexport const FormErrors = ({formErrors}) =>\r\n    <div className='formErrors'>\r\n        {Object.keys(formErrors).map((fieldName, i) => {\r\n            if(formErrors[fieldName].length > 0){\r\n                return (\r\n                    <p key={i}>{fieldName} {formErrors[fieldName]}</p>\r\n                )\r\n            } else {\r\n                return '';\r\n            }\r\n        })}\r\n    </div>","import React, { Component } from 'react'\r\nimport api from '../api'\r\nimport { FormErrors } from './FormErrors';\r\nimport styled from \"styled-components\";\r\n\r\nconst Form = styled.div.attrs({\r\n    className: 'Form',\r\n})`\r\n    width: 500px; \r\n    margin: auto;\r\n    margin-top:70px;\r\n`;\r\n\r\nclass Registration extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: '',\r\n            username: '',\r\n            password: '',\r\n            formErrors: {email: '', password: ''},\r\n            emailValid: false,\r\n            passwordValid: false,\r\n            formValid: false\r\n        }\r\n    }\r\n\r\n    handleChangeInputEmail = async event => {\r\n        const email = event.target.value;\r\n        const name = 'email';\r\n        this.setState({ email },\r\n            () => { this.validateField(name, email) })\r\n    };\r\n\r\n    handleChangeInputUsername = async event => {\r\n        const username = event.target.value;\r\n        this.setState({ username })\r\n    };\r\n\r\n    handleChangeInputPassword = async event => {\r\n        const password = event.target.value;\r\n        const name = 'password';\r\n        this.setState({ password },\r\n            () => { this.validateField(name, password) })\r\n    };\r\n\r\n    validateField(fieldName, value) {\r\n        let fieldValidationErrors = this.state.formErrors;\r\n        let emailValid = this.state.emailValid;\r\n        let passwordValid = this.state.passwordValid;\r\n\r\n        switch(fieldName) {\r\n            case 'email':\r\n                emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\r\n                fieldValidationErrors.email = emailValid ? '' : ' is invalid';\r\n                break;\r\n            case 'password':\r\n                passwordValid = value.length >= 6;\r\n                fieldValidationErrors.password = passwordValid ? '': ' is too short';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.setState({formErrors: fieldValidationErrors,\r\n            emailValid: emailValid,\r\n            passwordValid: passwordValid\r\n        }, this.validateForm);\r\n    }\r\n\r\n    validateForm() {\r\n        this.setState({formValid: this.state.emailValid && this.state.passwordValid});\r\n    }\r\n\r\n    errorClass(error) {\r\n        return(error.length === 0 ? '' : 'has-error');\r\n    }\r\n\r\n    handleIncludeUser = async () => {\r\n        const { email, username, password } = this.state;\r\n        const payload = { email, username, password};\r\n\r\n        await api.createUser(payload).then(res => {\r\n            window.alert(`Пользователь успешно создан`);\r\n            this.setState({\r\n                email: '',\r\n                username: '',\r\n                password: '',\r\n            })\r\n            this.props.history.push(\"/login\");\r\n        }).catch(error => {\r\n                window.alert(`Пользователь не создан`)\r\n        })\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Form>\r\n                <h2>Регистрация</h2>\r\n                <div className=\"panel panel-default\">\r\n                    <FormErrors formErrors={this.state.formErrors} />\r\n                </div>\r\n                <div className={`form-group ${this.errorClass(this.state.formErrors.email)}`}>\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <input type=\"email\" required className=\"form-control\" name=\"email\"\r\n                           placeholder=\"Email\"\r\n                           value={this.state.email}\r\n                           onChange={this.handleChangeInputEmail}  />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"username\">Имя пользователя</label>\r\n                    <input type=\"username\" required className=\"form-control\" name=\"username\"\r\n                           placeholder=\"Имя пользователя\"\r\n                           value={this.state.username}\r\n                           onChange={this.handleChangeInputUsername}  />\r\n                </div>\r\n                <div className={`form-group ${this.errorClass(this.state.formErrors.password)}`}>\r\n                    <label htmlFor=\"password\">Пароль</label>\r\n                    <input type=\"password\" className=\"form-control\" name=\"password\"\r\n                           placeholder=\"Пароль\"\r\n                           value={this.state.password}\r\n                           onChange={this.handleChangeInputPassword}  />\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleIncludeUser}>Зарегистрироваться</button>\r\n                <a className=\"btn btn-primary\" href={'/'}>Отмена</a>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Registration","import React, { Component } from 'react'\r\nimport api from '../api'\r\nimport styled from \"styled-components\";\r\n\r\nconst Form = styled.div.attrs({\r\n    className: 'Form',\r\n})`\r\n    width: 500px; \r\n    margin: auto;\r\n    margin-top:70px;\r\n`;\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n        }\r\n    }\r\n\r\n    handleChangeInputEmail = async event => {\r\n        const email = event.target.value;\r\n        this.setState({ email })\r\n    };\r\n\r\n    handleChangeInputPassword = async event => {\r\n        const password = event.target.value;\r\n        this.setState({ password })\r\n    };\r\n\r\n    handleIncludeUser = async () => {\r\n        const { email, password } = this.state;\r\n        const payload = { email, password};\r\n\r\n        await api.login(payload).then(res => {\r\n            window.alert(`Вы успешно авторизовались`);\r\n            this.setState({\r\n                email: '',\r\n                password: '',\r\n                })\r\n            this.props.history.push(\"/mes\");\r\n            })\r\n            .catch(error => {\r\n                window.alert(`Email или пароль не верны`)\r\n            })\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Form>\r\n                <h2>Авторизация</h2>\r\n                <div>\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <input type=\"email\" required className=\"form-control\" name=\"email\"\r\n                           placeholder=\"Email\"\r\n                           value={this.state.email}\r\n                           onChange={this.handleChangeInputEmail}  />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"password\">Пароль</label>\r\n                    <input type=\"password\" className=\"form-control\" name=\"password\"\r\n                           placeholder=\"Пароль\"\r\n                           value={this.state.password}\r\n                           onChange={this.handleChangeInputPassword}  />\r\n                </div>\r\n                <br/>\r\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleIncludeUser}>Вход</button>\r\n                <a className=\"btn btn-primary\" href={'/'}>Отмена</a>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login","import React, { Component } from 'react'\r\nimport styled from \"styled-components\";\r\n\r\nconst Form = styled.div.attrs({\r\n    className: 'Form',\r\n})`\r\n    width: 500px; \r\n    margin: auto;\r\n    margin-top:70px;\r\n`;\r\nclass Messenger extends Component {\r\n    render() {\r\n        return (\r\n            <Form>\r\n                <h1>Типо мессенджер</h1>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Messenger","import React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\n\nimport { Home, Registration, Login, Messenger } from '../pages'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nfunction App() {\n    return (\n        <Router>\n            <Switch>\n                <Route path=\"/\" exact component={Home} />\n                <Route path=\"/registration\" exact component={Registration} />\n                <Route path=\"/login\" exact component={Login} />\n                <Route path=\"/mes\" exact component={Messenger} />\n            </Switch>\n        </Router>\n    )\n}\n\nexport default App\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}